## 1. 한주간 진행하였던 것들

* AWS 계정 MFA활성화 정상 작동 확인

* RDS 프리티어 재생성시 계속된 막힘 문제

* S3를 활용한 업로드,다운로드 구현중 


## 2. 진행중 겪었던 모든것들 


### 1) html a태그에서 파일을 다운로드할때 이름을 변경할수 없을까..?

파일이 uuid 로 이름이 변경되어 저장되있어서 다운로드시 다시 원본이름으로 되돌려줘야 하는문제가 있는데..

s3에서 다운로드 하는 가장 쉬운 첫번째 방법은 s3로 업로드된 파일의 링크를 얻어서 다운로드하는것인데

이 링크를 a태그 href속성에 입력시켜주면 파일의 원본이름을 가져올수 없다는것이다..

a태그의 download 속성값에 download="dokky.png" 라고 넣어주면 이름이 변경된다고 하는데 소용이없다..

<a href="https://picksell-bucket.s3.ap-northeast-2.amazonaws.com/upload/2019/10/08/0a38de9a-5d3a-463b-8319-377c821de9d9_dokky.png" download="dokky.png">다운로드</a>

https://picksell-bucket.s3.ap-northeast-2.amazonaws.com/upload/2019/10/08/0a38de9a-5d3a-463b-8319-377c821de9d9_dokky.png" download="dokky.png"


### 2) 퍼블릭,프라이빗 접근의 복잡한..설정문제..
 
s3에서 업로드와 다운로드를 할때 로그인한 회원에게만 파일 업로드와 다운로드를 제공하고싶다. 

왜냐하면 아무나 외부에서 대량 요청시(다운로드,업로드) 서버 과금발생을 막기 위해서인데,

이 설정을 제대로 잡는게 굉장히 복잡하고 진입하기 어렵다..

### 3) s3로 업로드 해야할 항목은..?

기존에는 ec2로 파일과,이미지 모두 올리고 있었다.

그런데 이것을 S3로 파일과 이미지를 바꿔 올리려한다.

현재, ec2의 경우 750시간,30GB 무료이고 

S3의 경우는 표준 스토리지 5GB, GET 요청 20,000건, PUT 요청 2,000건으로 트래픽에 대한 요금이 발생한다.

이해할 수 없는건 벌써 S3의 경우 일주일도 안되서 30퍼센트 GET 요청이 이루어졌다.

이대로 가다간 금방 과금이 발생할것만 같다. 저 정도의 요청을 하지는 않았던것 같은데..

S3의 경우 트래픽에 대한 요금이 발생해 굉장히 조심스럽다..

게시글의 다운로드 파일같은경우는 회원들이 클릭을 할때만 S3로 요청을 하겠지만, 

이미지 파일같은경우는 비회원까지 포함해서 게시글을 읽는 것만으로도 요청이 수많이 들어갈텐데

그러면 이미지들은 그냥 EC2에다가 저장을 하는것이 비용문제를 줄일수 있는것일까..?

현재 게시글 쓰기 페이지에서 파일과,이미지를 올릴수 있는데..

문제는 이미지도 s3로 올려야 하는지 잘 모르겠다.

ec2와 분리해서 s3를 사용하는 이유가 있을텐데..